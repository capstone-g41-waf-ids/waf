{% extends "layout.html" %}
{% block content %}

<div><h1>Configure Firewall</h1></div>

	<div class="rendered-form">
		<form id="confirm" action="" method="post"></form> <!-- put database link in action -->
			<div class="search-container">
				<form action="{{url_for('blacklistIP')}}" method="POST">
					<label for="ip_blacked" class="formbuilder-text-label">Block by IP address</label>
				  <input type="text" placeholder="add IP or IP with subnet eg: 192.168.0.1 or 192.168.0.1/24" id="ip_blacked" name="ip_blacked" pattern="(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}(\/(3[0-2]|[1-2]\d|\d))?">
				  <button type="submit">add IP</button>
				</form>
		</div>

		<fieldset>
			<table style="undefined;table-layout: fixed; width: 600px">
				<colgroup>
				<col style="width: 100px">
				<col style="width: 77px">
				</colgroup>
				<thead>
				<tr>
					<th>IP Address</th>
				</tr>
				</thead>
				<tbody>
					<div class="scrollit">
						{% for x in results_1 %}
						<tr>
							<form action="{{url_for('deleteIP')}}" method="POST">
							<td><input type="text" value="{{x['ip']}}" name="deleteIP"  readonly></td>
							<td><button type="submit" style="default" class="btn" name="deleteIP">delete</button></td>
							</form>
						</tr>
						{% endfor %}
					</div>
				</tbody>
			</table>
		</fieldset>
		
		<form action="{{url_for('blacklistGEO')}}" method="POST">
			<label for="geoip_blacked" class="formbuilder-text-label">Block by Geolocation</label>
			<select name="geoip_blacked" id="geoip_blacked">
				{% for x in results_3 %}
					<option value="{{x['Code']}}" name="geoip_blacked">{{x['Name']}} ({{x['Code']}})</option>
				{% endfor %}
			</select>
			<br><br>
			<button type="submit">add Geolocation</button>
		</form>

		<fieldset>
			<table style="undefined;table-layout: fixed; width: 600px">
				<colgroup>
				<col style="width: 100px">
				<col style="width: 77px">
				</colgroup>
				<thead>
				<tr>
					<th>Geolocations</th>
				</tr>
				</thead>
				<tbody>
					<div class="scrollit">
						{% for x in results_2 %}
						<tr>
							<form action="{{url_for('delete_geo')}}" method="POST">
							<td><input type="text" value="{{x['country_code']}}" name="delete_geo"  readonly></td>
							<td><button type="submit" style="default" class="btn" name="delete_geo">delete</button></td>
							</form>
						</tr>
						{% endfor %}
					</div>
				</tbody>
			</table>
		</fieldset>
	</div>
{% endblock %}